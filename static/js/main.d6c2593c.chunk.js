(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{106:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return v}));var o=t(0),c=t(48),i=t.n(c);t(67),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=t(59),a=t(110),s=t(107),l=t(108),u=t(109),h=(t(68),t(4));function d(){var e=Object(o.useState)(""),n=Object(r.a)(e,2),t=n[0],c=n[1];return Object(h.jsx)("div",{className:"Login",children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e){fetch("http://localhost:8080/player",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){document.cookie="access_token="+e.access_token,window.location.replace(window.location.origin+"/")})).catch((function(e){console.error("Error:",e)}))}(t)},children:[Object(h.jsxs)(a.a,{controlId:"username",bsSize:"large",children:[Object(h.jsx)(s.a,{children:"Username"}),Object(h.jsx)(l.a,{autoFocus:!0,type:"username",value:t,onChange:function(e){return c(e.target.value)}})]}),Object(h.jsx)(u.a,{block:!0,bsSize:"large",disabled:!(t.length>0),type:"submit",children:"Login"})]})})}var j=t(55),b=t(56),f=t(61),m=t(60),g=t(57),O=t(25),p=function(e){Object(f.a)(t,e);var n=Object(m.a)(t);function t(){return Object(j.a)(this,t),n.apply(this,arguments)}return Object(b.a)(t,[{key:"getAccessToken",value:function(){try{return document.cookie.split("; ").find((function(e){return e.startsWith("access_token=")})).split("=")[1]}catch(e){return null}}},{key:"getToken",value:function(e){return null!=e?Object(g.a)(e):null}},{key:"isLogged",value:function(){var e=this.getToken(this.getAccessToken());return null==e?Object(h.jsx)(O.b,{to:"/login",children:"Login"}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{children:["Welcome ",e.username]}),Object(h.jsxs)("h3",{children:["Id: ",e.jti]}),Object(h.jsx)(u.a,{block:!0,bsSize:"large",type:"submit",onClick:this.newGame,children:"New Game"})]})}},{key:"newGame",value:function(){var e=this.getAccessToken();fetch("http://localhost:8080/game",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({players:[this.getToken(e).jti]})}).then((function(e){return e.json()})).then((function(e){window.location.replace(window.location.origin+"/game")})).catch((function(e){console.error("Error:",e)}))}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"Home",children:[Object(h.jsx)("h1",{children:"Home"}),this.isLogged()]})}}]),t}(o.Component),k=t(5);function v(){return Object(h.jsx)(O.a,{children:Object(h.jsxs)(k.c,{children:[Object(h.jsx)(k.a,{path:"/login",children:Object(h.jsx)(d,{})}),Object(h.jsx)(k.a,{path:"/",children:Object(h.jsx)(p,{})})]})})}i.a.render(Object(h.jsx)(v,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,n,t){},68:function(e,n,t){}},[[106,1,2]]]);
//# sourceMappingURL=main.d6c2593c.chunk.js.map